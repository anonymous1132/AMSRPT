webpackJsonp([1],{"5rzY":function(t,e){},C5bi:function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("7+uW"),a=o("zL8q"),n=o.n(a),l=(o("tvR6"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]});var r=o("VU/8")({name:"App"},l,!1,function(t){o("C5bi")},null,null).exports,i=o("/ocq"),d={name:"baseLayout",data:function(){return{date:new Date}},computed:{dateStr:function(){var t=this.date.getFullYear(),e=this.date.getMonth()+1;e=e<10?"0"+e:e;var o=this.date.getDate();o=o<10?"0"+o:o;var s=this.date.getDay();switch(s){case 1:s="星期一";break;case 2:s="星期二";break;case 3:s="星期三";break;case 4:s="星期四";break;case 5:s="星期五";break;case 6:s="星期六";break;case 0:s="星期日"}var a=this.date.getHours(),n=this.date.getMinutes(),l=this.date.getSeconds();return t+"年"+e+"月"+o+"日 "+s+" "+(a=a<10?"0"+a:a)+":"+(n=n<10?"0"+n:n)+":"+(l=l<10?"0"+l:l)}}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"gray-bg",staticStyle:{"min-height":"100%"}},[e("div",{staticClass:"wrapper wrapper-content animated fadeInRight"},[this._t("default")],2),this._v(" "),e("div",{staticClass:"footer fixed"},[this._m(0),this._v(" "),e("div",[e("strong",[this._v(this._s(this.dateStr))])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pull-right"},[e("strong",[this._v("@AMS Report")])])}]},u=o("VU/8")(d,c,!1,null,null,null).exports,h={name:"baseContainer",props:{headerHeight:{type:String,default:function(){return"600"}}},data:function(){return{activeNames:["1"]}}},v={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-container",[o("el-header",{attrs:{height:t.headerHeight}},[o("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[o("el-collapse-item",{attrs:{title:"查询条件",name:"1"}},[t._t("header")],2)],1)],1),t._v(" "),o("el-main",[t._t("main")],2)],1)},staticRenderFns:[]},p=o("VU/8")(h,v,!1,null,null,null).exports,_={name:"baseHeaderCard",props:{coder:{type:String,default:function(){return"曹晋（0279）"}},user:{type:String,default:function(){return"陈舒（0353）"}},project:{type:String,required:!0}},data:function(){return{count:0}},mounted:function(){var t=this.URL_PREFIX+"/Common/GetClickCount",e={title:this.project},o=this;this.$http.post(t,e).then(function(t){t.data.success?o.count=t.data.count:console.log(t.data.msg)}).catch(function(t){console.log(t)})}},m={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[o("div",[t._v("开发者："+t._s(t.coder))]),t._v(" "),o("div",[t._v("需求者："+t._s(t.user))]),t._v(" "),o("div",[t._v("Cilck Count: "+t._s(t.count))]),t._v(" "),t._t("default")],2)},staticRenderFns:[]},f=o("VU/8")(_,m,!1,null,null,null).exports,C=this,b={name:"baseTableContainer",props:{title:{type:String,default:function(){return""}},useExcel:{type:Boolean,default:function(){return!0}},excelStyle:{type:String},tableData:{},fileName:{type:String,default:"RPT.xls"},excelBtnLabel:{type:String,default:"Excel"}},data:function(){return{}},computed:{show:function(){return""!=C.title}},methods:{table2Excel:function(){var t="";this.excelStyle&&(t=this.excelStyle);var e='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel"xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e'+t+"</head><body>{table}</body></html>",o=this.$refs.dlink,s={worksheet:"Worksheet",table:this.$refs.table.innerHTML};o.href="data:application/vnd.ms-excel;base64,"+base64(format(e,s)),o.download=this.fileName,o.click()},table2Html:function(){var t=this.$refs.table,e=(window.getComputedStyle(t),document.createElement("div"));e.innerHTML=t.outerHTML,console.log(e)}}},x={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"ibox"},[t.show?o("div",{staticClass:"ibox-title"},[o("label",[t._v(t._s(t.title))])]):t._e(),t._v(" "),o("div",{staticClass:"ibox-content"},[o("el-row",{attrs:{type:"flex",justify:"end"}},[t._t("left"),t._v(" "),t.useExcel?o("div",{staticClass:"downloadBtn"},[o("el-button",{attrs:{type:"primary",icon:"el-icon-download",size:"mini"},on:{click:t.table2Excel}},[t._v(t._s(t.excelBtnLabel))])],1):t._e(),t._v(" "),t._t("right")],2),t._v(" "),o("div",{ref:"table",staticClass:"table-div"},[t._t("table",null,{datas:t.tableData})],2),t._v(" "),o("a",{ref:"dlink",staticStyle:{display:"none"}})],1)])},staticRenderFns:[]};var D={name:"LotHoldReviewPage",components:{BaseLayout:u,BaseContainer:p,BaseHeaderCard:f,BaseTableContainer:o("VU/8")(b,x,!1,function(t){o("5rzY")},null,null).exports},data:function(){return{loading:!1,from:null,to:null,pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},showCtx:"",selDepts:[],depts:[],selReCodes:[],allReCodes:[],showDetail:!0,showProd:!0,tableData:{from:null,to:null,items:[],lotHoldList:[],nonProdSummaryEntities:[],prodSummaryEntities:[]}}},computed:{reCodes:function(){this.selReCodes=[];var t=this.selDepts;if(0===t.length)return this.allReCodes;var e=t.map(function(t){return t});return this.allReCodes.filter(function(t){return e.indexOf(t.substring(0,1))>-1})},tableFileName:function(){var t=this.tableData.from.substring(0,10).replace(/[-]/g,""),e=this.tableData.to.substring(0,10).replace(/[-]/g,"");return"RPT_HoldLotReview_"+(this.showProd?"Product":"NonProduct")+"_"+(this.showDetail?"Detail":"Summary")+"_"+t+"~"+e+".xls"},tableTitle:function(){return"Lot Hold Review:"+this.tableData.from+"~"+this.tableData.to+";"+(this.showProd?"Product":"NonProduct")+";"+(this.showDetail?"Detail":"Summary")},showTableData:function(){var t=this,e=this.tableData.items,o=[],s=[];if(this.showProd?(o=this.tableData.lotHoldList.filter(function(t){return"Production"===t.LotType}),s=this.tableData.prodSummaryEntities):(o=this.tableData.lotHoldList.filter(function(t){return"Production"!==t.LotType}),s=this.tableData.nonProdSummaryEntities),this.selDepts.length>0&&(o=o.filter(function(e){return t.selDepts.indexOf(e.FinalDept)>-1})),this.selReCodes.length>0){var a=o.filter(function(e){return t.selReCodes.indexOf(e.ReasonCode)>-1});if(this.selReCodes.indexOf("System")>-1){var n=o.filter(function(t){return"system"==t.ReasonDept});o=a.concat(n)}else o=a}return o.sort(function(t,e){return t.HoldTime<e.HoldTime?1:t.HoldTime==e.HoldTime?0:-1}),{items:e,lotHoldList:o,summaryEntities:s}}},watch:{showDetail:function(t){this.showCtx=t?"detail":"summary"}},methods:{handleQueryClick:function(){if(!this.from||!this.to)return this.$message.error("请选择开始跟结束时间");this.loading=!0;var t=this.URL_PREFIX+"/ReqRpt016/GetLotDetail",e={startTime:this.getDateStr(this.from)+" 00:00:00",endTime:this.getDateStr(this.to)+" 23:59:59"},o=this;this.$http.post(t,e).then(function(t){t.data.success?(o.tableData={from:e.startTime,to:e.endTime,items:t.data.Items,lotHoldList:t.data.LotHoldList},o.tableData.lotHoldList.map(function(t){var e=o.depts.find(function(e){return e.Code_ID==t.ReasonDept});t.ReCodeDept=e?e.Description:t.ReasonDept;var s=o.depts.find(function(e){return e.Code_ID==t.HoldPDDept});t.HoldPDModule=s?s.Description:t.HoldPDDept}),o.showCtx=o.showDetail?"detail":"summary"):(console.log(t.data.msg),o.$message.error("服务端运行异常")),o.loading=!1}).catch(function(t){console.log(t),o.$message.error("网络异常"),o.loading=!1})},handleClearClick:function(){this.selDepts=[]},getDateStr:function(t){var e=t.getFullYear(),o=t.getMonth()+1;o=o<10?"0"+o:o;var s=t.getDate();return e+"-"+o+"-"+(s=s<10?"0"+s:s)},getCurDate:function(){var t=new Date;return this.getDateStr(t)},getCurTime:function(){var t=new Date,e=t.getFullYear(),o=t.getMonth()+1;o=o<10?"0"+o:o;var s=t.getDate();s=s<10?"0"+s:s;var a=t.getHours();a=a<10?"0"+a:a;var n=t.getMinutes();n=n<10?"0"+n:n;var l=t.getSeconds();return e+"-"+o+"-"+s+" "+a+":"+n+":"+(l=l<10?"0"+l:l)}},created:function(){var t=this.URL_PREFIX+"/ReqRpt016/GetModuleAndReasonList",e=this;this.$http.post(t).then(function(t){t.data.success?(e.depts=t.data.ModuleList,e.allReCodes=t.data.HoldReasonCodeList):(console.log(t.data.msg),e.$message.error("服务端程序出现异常"))}).catch(function(t){console.log(t),e.$message.error("服务器网络异常，初始化失败")})}},g={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("BaseLayout",[o("BaseContainer",[o("el-row",{attrs:{slot:"header",type:"flex",justify:"start"},slot:"header"},[o("el-col",{attrs:{span:20}},[o("div",{staticClass:"lhr-head-div"},[o("div",{staticClass:"lhr-box"},[o("label",[t._v("From:")]),t._v(" "),o("el-date-picker",{attrs:{type:"date",placeholder:"请选择开始日期,00:00:00","picker-options":t.pickerOptions},model:{value:t.from,callback:function(e){t.from=e},expression:"from"}}),t._v(" "),o("label",[t._v("To:")]),t._v(" "),o("el-date-picker",{attrs:{type:"date",placeholder:"请选择结束日期,23:59:59","picker-options":t.pickerOptions},model:{value:t.to,callback:function(e){t.to=e},expression:"to"}}),t._v(" "),o("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:t.loading},on:{click:t.handleQueryClick}})],1),t._v(" "),t.showCtx?[o("div",{staticClass:"lhr-box"},[o("label",[t._v("Modules:")]),t._v(" "),o("el-select",{attrs:{multiple:"",placeholder:"Default All"},model:{value:t.selDepts,callback:function(e){t.selDepts=e},expression:"selDepts"}},t._l(t.depts,function(t){return o("el-option",{key:t.Code_ID,attrs:{label:t.Description,value:t.Code_ID}})}),1)],1),t._v(" "),o("div",{staticClass:"lhr-box"},[o("label",[t._v("ResonCodes:")]),t._v(" "),o("el-select",{attrs:{filterable:"",multiple:"",placeholder:"Default All"},model:{value:t.selReCodes,callback:function(e){t.selReCodes=e},expression:"selReCodes"}},[t._l(t.reCodes,function(t,e){return o("el-option",{key:e,attrs:{label:t,value:t}})}),t._v(" "),o("el-option",{attrs:{label:"System",value:"System"}})],2)],1),t._v(" "),o("div",{staticClass:"lhr-box"},[o("el-switch",{attrs:{"active-text":"Product","inactive-text":"Non-Product"},model:{value:t.showProd,callback:function(e){t.showProd=e},expression:"showProd"}})],1),t._v(" "),o("div",{staticClass:"lhr-box"},[o("el-button",{attrs:{type:"primary"},on:{click:t.handleClearClick}},[t._v("重置")])],1)]:t._e()],2)]),t._v(" "),o("el-col",{attrs:{span:4}},[o("BaseHeaderCard",{attrs:{project:"RPT000016",user:"李冬（0490）"}})],1)],1),t._v(" "),o("div",{staticClass:"lhr-main",attrs:{slot:"main"},slot:"main"},[t.showCtx?o("BaseTableContainer",{attrs:{title:t.tableTitle,fileName:t.tableFileName,tableData:t.showTableData},scopedSlots:t._u([{key:"table",fn:function(e){return o("div",{staticClass:"lhr-table-div"},[t.showDetail?o("table",{staticClass:"table table-responsive table-bordered table-hover"},[o("thead",[o("tr",[o("th",[t._v("Item")]),t._v(" "),o("th",[t._v("Prod ID")]),t._v(" "),o("th",[t._v("LotID")]),t._v(" "),o("th",[t._v("LotType")]),t._v(" "),o("th",[t._v("Qty")]),t._v(" "),o("th",[t._v("CurQty")]),t._v(" "),o("th",[t._v("Ope_NO")]),t._v(" "),o("th",[t._v("Ope Name")]),t._v(" "),o("th",[t._v("Ope.Dept.")]),t._v(" "),o("th",[t._v("Ope.Eqp Type")]),t._v(" "),o("th",[t._v("Hold User ID")]),t._v(" "),o("th",[t._v("Hold User Name")]),t._v(" "),o("th",[t._v("Hold User Dept.")]),t._v(" "),o("th",[t._v("Hold Time")]),t._v(" "),o("th",[t._v("Release Time")]),t._v(" "),o("th",[t._v("Duration(H)")]),t._v(" "),o("th",[t._v("Hold Code")]),t._v(" "),o("th",[t._v("Hold Comment")]),t._v(" "),o("th",[t._v("Re User ID")]),t._v(" "),o("th",[t._v("Re User Name")]),t._v(" "),o("th",[t._v("Re User Dept.")]),t._v(" "),o("th",[t._v("Release Comment")]),t._v(" "),o("th",[t._v("Hold Code Dept")])])]),t._v(" "),o("tbody",t._l(e.datas.lotHoldList,function(e,s){return o("tr",{key:s},[o("td",{domProps:{textContent:t._s(s+1)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.Prod)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.LotID)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.LotType)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.Qty)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.CurQty)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.OpeNO)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.PDName)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.HoldPDModule)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.EqpType)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.HoldUserID)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.HoldUserName)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.HoldUserDept)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.HoldTime)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.ReleaseTime)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.Duration)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.ReasonCode)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.HoldComment)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.ReleaseUserID)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.ReleaseUserName)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.ReleaseUserDept)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.ReleaseComment)}}),t._v(" "),o("td",{domProps:{textContent:t._s(e.ReCodeDept)}})])}),0)]):o("table",{staticClass:"table table-responsive table-bordered table-hover"},[o("thead",[o("tr",[o("th",[t._v("Item")]),t._v(" "),o("th",[t._v("Department")]),t._v(" "),o("th",[t._v("HoldCode")]),t._v(" "),o("th",[t._v("Qty")]),t._v(" "),t._l(e.datas.items,function(e,s){return o("th",{key:s,domProps:{textContent:t._s(e)}})})],2)])])])}}],null,!1,1088723821)}):t._e()],1)],1)],1)},staticRenderFns:[]};var y=o("VU/8")(D,g,!1,function(t){o("QBEz")},null,null).exports;s.default.use(i.a);var R=new i.a({routes:[{path:"/",name:"HelloWorld",component:y}]}),P=o("mtWM"),w=o.n(P);s.default.config.productionTip=!1,s.default.use(n.a),s.default.prototype.$http=w.a,s.default.prototype.URL_PREFIX="..",new s.default({el:"#app",router:R,components:{App:r},template:"<App/>"})},QBEz:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.140385f7eeebffbd80e0.js.map