webpackJsonp([1],{"5rzY":function(t,e){},C5bi:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),i=a("zL8q"),s=a.n(i),l=(a("tvR6"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]});var r=a("VU/8")({name:"App"},l,!1,function(t){a("C5bi")},null,null).exports,o=a("/ocq"),c={name:"baseLayout",data:function(){return{date:new Date}},computed:{dateStr:function(){var t=this.date.getFullYear(),e=this.date.getMonth()+1;e=e<10?"0"+e:e;var a=this.date.getDate();a=a<10?"0"+a:a;var n=this.date.getDay();switch(n){case 1:n="星期一";break;case 2:n="星期二";break;case 3:n="星期三";break;case 4:n="星期四";break;case 5:n="星期五";break;case 6:n="星期六";break;case 0:n="星期日"}var i=this.date.getHours(),s=this.date.getMinutes(),l=this.date.getSeconds();return t+"年"+e+"月"+a+"日 "+n+" "+(i=i<10?"0"+i:i)+":"+(s=s<10?"0"+s:s)+":"+(l=l<10?"0"+l:l)}}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"gray-bg",staticStyle:{"min-height":"100%"}},[e("div",{staticClass:"wrapper wrapper-content animated fadeInRight"},[this._t("default")],2),this._v(" "),e("div",{staticClass:"footer fixed"},[this._m(0),this._v(" "),e("div",[e("strong",[this._v(this._s(this.dateStr))])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pull-right"},[e("strong",[this._v("@AMS Report")])])}]},d=a("VU/8")(c,u,!1,null,null,null).exports,h={name:"baseContainer",props:{headerHeight:{type:String,default:function(){return"600"}}},data:function(){return{activeNames:["1"]}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",{attrs:{height:t.headerHeight}},[a("el-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("el-collapse-item",{attrs:{title:"查询条件",name:"1"}},[t._t("header")],2)],1)],1),t._v(" "),a("el-main",[t._t("main")],2)],1)},staticRenderFns:[]},p=a("VU/8")(h,f,!1,null,null,null).exports,m={name:"baseHeaderCard",props:{coder:{type:String,default:function(){return"曹晋（0279）"}},user:{type:String,default:function(){return"陈舒（0353）"}},project:{type:String,required:!0}},data:function(){return{count:0}},mounted:function(){var t=this.URL_PREFIX+"/Common/GetClickCount",e={title:this.project},a=this;this.$http.post(t,e).then(function(t){t.data.success?a.count=t.data.count:console.log(t.data.msg)}).catch(function(t){console.log(t)})}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"box-card"},[a("div",[t._v("开发者："+t._s(t.coder))]),t._v(" "),a("div",[t._v("需求者："+t._s(t.user))]),t._v(" "),a("div",[t._v("Cilck Count: "+t._s(t.count))]),t._v(" "),t._t("default")],2)},staticRenderFns:[]},g=a("VU/8")(m,v,!1,null,null,null).exports,_=this,b={name:"baseTableContainer",props:{title:{type:String,default:function(){return""}},useExcel:{type:Boolean,default:function(){return!0}},excelStyle:{type:String},tableData:{},fileName:{type:String,default:"RPT.xls"},excelBtnLabel:{type:String,default:"Excel"}},data:function(){return{}},computed:{show:function(){return""!=_.title}},methods:{table2Excel:function(){var t="";this.excelStyle&&(t=this.excelStyle);var e='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel"xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e'+t+"</head><body>{table}</body></html>",a=this.$refs.dlink,n={worksheet:"Worksheet",table:this.$refs.table.innerHTML};a.href="data:application/vnd.ms-excel;base64,"+base64(format(e,n)),a.download=this.fileName,a.click()},table2Html:function(){var t=this.$refs.table,e=(window.getComputedStyle(t),document.createElement("div"));e.innerHTML=t.outerHTML,console.log(e)}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ibox"},[t.show?a("div",{staticClass:"ibox-title"},[a("label",[t._v(t._s(t.title))])]):t._e(),t._v(" "),a("div",{staticClass:"ibox-content"},[a("el-row",{attrs:{type:"flex",justify:"end"}},[t._t("left"),t._v(" "),t.useExcel?a("div",{staticClass:"downloadBtn"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-download",size:"mini"},on:{click:t.table2Excel}},[t._v(t._s(t.excelBtnLabel))])],1):t._e(),t._v(" "),t._t("right")],2),t._v(" "),a("div",{ref:"table",staticClass:"table-div"},[t._t("table",null,{datas:t.tableData})],2),t._v(" "),a("a",{ref:"dlink",staticStyle:{display:"none"}})],1)])},staticRenderFns:[]};var C=a("VU/8")(b,y,!1,function(t){a("5rzY")},null,null).exports,x={name:"baseTransfer",props:{titleLeft:{type:String,default:function(){return""}},titleRight:{type:String,default:function(){return""}},width:{type:String,default:function(){return"135px"}},height:{type:String,default:function(){return"150px"}},data:{type:Array,default:[],required:!0}},data:function(){return{selectedItems:[],leftValue:[],rightValue:[]}},computed:{availableItems:function(){return this.data.map(function(t){return t}).sort()}},watch:{leftValue:function(t){if(0!=t.length){for(var e=t.length-1;e>=0;e--)this.selectedItems.push(this.availableItems[t[e]]),this.availableItems.splice(t[e],1),t.splice(e,1);this.selectedItems.sort()}},rightValue:function(t){if(0!=t.length){for(var e=t.length-1;e>=0;e--)this.availableItems.push(this.selectedItems[t[e]]),this.selectedItems.splice(t[e],1),t.splice(e,1);this.availableItems.sort()}},selectedItems:function(t){this.$emit("selectedChanged",t)}},methods:{handleAllSelectClick:function(){this.leftValue=this.availableItems.map(function(t,e){return e})},handleCancelClick:function(){this.rightValue=this.selectedItems.map(function(t,e){return e})}},mounted:function(){}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"transfer"},[a("div",{staticClass:"transfer-box",style:{width:t.width}},[a("div",{staticClass:"transfer-control"},[a("label",[t._v(t._s(t.titleLeft))])]),t._v(" "),a("div",{staticClass:"transfer-control"},[a("el-button",{attrs:{size:"small",icon:"el-icon-d-arrow-right"},on:{click:t.handleAllSelectClick}},[t._v("全选")])],1),t._v(" "),a("div",{staticClass:"transfer-control"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.leftValue,expression:"leftValue"}],style:{height:t.height},attrs:{multiple:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.leftValue=e.target.multiple?a:a[0]}}},t._l(t.availableItems,function(e,n){return a("option",{key:n,domProps:{value:n,textContent:t._s(e)}})}),0)])]),t._v(" "),a("div",{staticClass:"transfer-box",style:{width:t.width}},[a("div",{staticClass:"transfer-control"},[a("label",[t._v(t._s(t.titleRight))])]),t._v(" "),a("div",{staticClass:"transfer-control"},[a("el-button",{attrs:{size:"small",icon:"el-icon-d-arrow-left"},on:{click:t.handleCancelClick}},[t._v("取消")])],1),t._v(" "),a("div",{staticClass:"transfer-control"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.rightValue,expression:"rightValue"}],style:{height:t.height},attrs:{multiple:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.rightValue=e.target.multiple?a:a[0]}}},t._l(t.selectedItems,function(e,n){return a("option",{key:n,domProps:{value:n,textContent:t._s(e)}})}),0)])])])},staticRenderFns:[]};var R=a("VU/8")(x,k,!1,function(t){a("OYPm")},null,null).exports;Array.prototype.distinct=function(){for(var t=[],e=0;e<this.length;e++)for(var a=e+1;a<this.length;)this[e]===this[a]?t.push(this.splice(a,1)[0]):a++;return t};var T={name:"ClickCountPage",components:{BaseLayout:d,BaseContainer:p,BaseHeaderCard:g,BaseTableContainer:C,BaseTransfer:R},data:function(){return{selMonth:"",categoryList:[],rptNameItems:[],loading:!0,tableData:{items:[],clkctEntities:[],caption:""}}},computed:{rptTypeItems:function(){var t=this.categoryList.map(function(t){return t.PrivilegeCategory});return t.distinct(),t},fileName:function(){return this.tableData.caption+".xls"}},methods:{handleQueryClick:function(){var t=this.$refs.rptName.selectedItems,e=this.categoryList.filter(function(e){return t.indexOf(e.PrivilegeName)>-1}).map(function(t){return t.PrivilegeID});if(0==e.length)return this.$message.error("Please select one RPT Name Item at least");this.selMonth?this.getTableDataOfMonth(e):this.getTableDataOfYear(e)},handleRptTypeSelectedChanged:function(t){this.rptNameItems=this.categoryList.filter(function(e){return t.indexOf(e.PrivilegeCategory)>-1}).map(function(t){return t.PrivilegeName}),this.$refs.rptName.selectedItems=[]},getTableDataOfMonth:function(t){var e=this.URL_PREFIX+"/ReqRpt063/GetTableDataOfMonth",a={year:this.selMonth.getFullYear(),month:this.selMonth.getMonth()+1,privilegeIdList:t};this.tableData.caption="Click Count-"+a.year+(a.month<10?"0"+a.month:a.month),this.postRequestTableData(e,a)},getTableDataOfYear:function(t){var e=this.URL_PREFIX+"/ReqRpt063/GetTableDataOfYear",a={privilegeIdList:t};this.tableData.caption="Click Count-"+(new Date).getFullYear()+"年",this.postRequestTableData(e,a)},postRequestTableData:function(t,e){var a=this;this.loading=!0;var n=this;this.$http.post(t,e).then(function(t){t.data.success?(n.tableData.items=t.data.Items,n.tableData.clkctEntities=t.data.ClickCountEntities,n.tableData.clkctEntities.map(function(t){var e=n.categoryList.find(function(e){return e.PrivilegeID==t.PrivilegeID});t.RptType=e.PrivilegeCategory,t.RptName=e.PrivilegeName,t.Total=t.ClickCountValues.reduce(function(t,e){return t+e})}),n.tableData.clkctEntities.sort(function(t,e){return t.Total>e.Total?-1:t.Total<e.Total?1:0})):(console.log(t.data.msg),n.$message.error("服务器发生异常，请求失败")),a.loading=!1}).catch(function(t){console.log(t),n.$message.error("请求异常，获取数据更新页面失败"),a.loading=!1})}},mounted:function(){var t=this.URL_PREFIX+"/ReqRpt063/GetCategoryList",e=this;this.$http.post(t).then(function(t){t.data.success?e.categoryList=t.data.BrprivilegeList:(console.log(t.data.msg),e.$message.error("服务端运行异常，初始化失败")),e.loading=!1}).catch(function(t){console.log(t),e.$message.error("服务器网络异常，初始化失败"),e.loading=!1})}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BaseLayout",[a("BaseContainer",[a("el-row",{attrs:{slot:"header",type:"flex",justify:"start"},slot:"header"},[a("el-col",{attrs:{span:20}},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("BaseTransfer",{ref:"rptType",attrs:{titleLeft:"RPT Type",titleRight:"Selected RPT Type",data:t.rptTypeItems,width:"200px"},on:{selectedChanged:t.handleRptTypeSelectedChanged}}),t._v(" "),a("BaseTransfer",{ref:"rptName",attrs:{titleLeft:"RPT Name",titleRight:"Selected RPT Name",data:t.rptNameItems,width:"270px"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("BaseHeaderCard",{attrs:{project:"RPT000063"}}),t._v(" "),a("div",{staticClass:"clkct-lbl"},[a("label",[t._v("Month:")])]),t._v(" "),a("div",{staticClass:"clkct-btn"},[a("el-date-picker",{attrs:{type:"month",size:"small",placeholder:"default by year"},model:{value:t.selMonth,callback:function(e){t.selMonth=e},expression:"selMonth"}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search",loading:t.loading},on:{click:t.handleQueryClick}})],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"main"},slot:"main"},[t.tableData.items.length>0?a("BaseTableContainer",{attrs:{tableData:t.tableData,fileName:t.fileName},scopedSlots:t._u([{key:"table",fn:function(e){return a("table",{staticClass:"table table-responsive table-bordered table-hover"},[a("caption",[t._v(t._s(e.datas.caption))]),t._v(" "),a("thead",[a("tr",[a("th",[t._v("RPT Type")]),t._v(" "),a("th",[t._v("RPT Name")]),t._v(" "),t._l(e.datas.items,function(e,n){return a("th",{key:n,domProps:{textContent:t._s(e)}})}),t._v(" "),a("th",[t._v("Total")])],2)]),t._v(" "),a("tbody",t._l(e.datas.clkctEntities,function(e){return a("tr",{key:e.PrivilegeID},[a("td",{domProps:{textContent:t._s(e.RptType)}}),t._v(" "),a("td",{domProps:{textContent:t._s(e.RptName)}}),t._v(" "),t._l(e.ClickCountValues,function(n,i){return a("td",{key:e.PrivilegeID+i,domProps:{textContent:t._s(n)}})}),t._v(" "),a("td",{domProps:{textContent:t._s(e.Total)}})],2)}),0)])}}],null,!1,4176699123)}):t._e()],1)],1)],1)},staticRenderFns:[]};var I=a("VU/8")(T,w,!1,function(t){a("NiBZ")},null,null).exports;n.default.use(o.a);var P=new o.a({routes:[{path:"/",name:"HelloWorld",component:I}]}),D=a("mtWM"),E=a.n(D);n.default.config.productionTip=!1,n.default.use(s.a),n.default.prototype.$http=E.a,n.default.prototype.URL_PREFIX="..",new n.default({el:"#app",router:P,components:{App:r},template:"<App/>"})},NiBZ:function(t,e){},OYPm:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.1a25a8d4898280bfde70.js.map